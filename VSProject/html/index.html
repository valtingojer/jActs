<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Development Tests</title>
    <script src="../Dist/jActs.js"></script>
</head>
<style></style>

<body style="display: grid; place-items: center; place-content: center; overflow: hidden">
    <div class="death-zone" style="position: absolute; width: 100%; height: 20px; background-color: red; left: 0; top: -100px"></div>
    <div class="death-zone" style="position: absolute; width: 100%; height: 20px; background-color: red; left: 0; bottom: -50px"></div>
    <SceneObjects style="display:none">
        <div id="bullet" class="my-red-spaceship-main-shoot layer-bullet"></div>
        <div id="bullet-secondary" class="my-red-spaceship-secondary-shoot layer-bullet"></div>
    </SceneObjects>

    <InfoPannel class="fps-display">
        <div class="inner-display" style="top: 0px"><h1>Seconds: <span id="label_secondcount"></span></h1></div>
        <div class="inner-display" style="top: 45px"><h1>FPS: <span id="label_fps"></span></h1></div>
        <div class="inner-display" style="top: 90px"><h1>Delta Time: <span id="label_deltatime"></span></h1></div>
        <div class="inner-display" style="top: 90px"><h1>pos x y: <span id="label_posxy"></span></h1></div>
    </InfoPannel>

    <MessageCanvas style="position: fixed; display:flex; width: 50vw; height: 50vw; place-items: center; place-content: center;">
        <div id="keydown" style="font-size: 32px"></div>
    </MessageCanvas>

    <div id="move-bg" class="my-space-background" data-py="0"></div>

    <square id="moveLoop" class="layer-wall my-simple-asteroid" style="position: relative"></square><br />
    <square id="move2" class="el_30x30 layer-wall" style="left: 200px"></square><br />
    <square class="my-red-spaceship-shoot-debuff debuff-layer"></square><br />
    <square class="my-red-spaceship-shoot-debuff debuff-layer"></square><br />
    <square class="my-red-spaceship-shoot-debuff debuff-layer"></square><br />
    <square class="my-red-spaceship-shoot-buff buff-layer"></square><br />
    <square class="my-red-spaceship-shoot-buff buff-layer"></square><br />
    <square class="my-red-spaceship-shoot-buff buff-layer"></square><br />

    <gameobjects>
        <div id="player" class='my-simple-spaceship' style="bottom: 0;"></div>
    </gameobjects>

    <audio id="sfxShoot" src="../Dist/Framework/css/gameobjects/spaceship/mp3/shoot.mp3" type="audio/mpeg"></audio>
    <audio id="sfxBackground" src="../Dist/Framework/css/gameobjects/spaceship/mp3/background.mp3" type="audio/mpeg" autoplay loop preload="auto"></audio>

</body>
</html>
<style>
</style>
<script>

</script>

<script>
    
    _jaAwake(function () {
        //_include('ttt.css');
        _include('../Dist/Framework/js/beta/tests.js');
    });

    _jaAfterLoad(
        function () {
        }
    );

    _jaUpdate(function () {
        _ja('#sfxBackground').play();

        let factor = 1 + _jaTime.secondCount * 0.01;
        let speed = 3;
        let backgroundY = parseInt(_ja('#move-bg').getAttribute('data-py'));
        backgroundY = (isNaN(backgroundY)) ? 0 : backgroundY;
        backgroundY = backgroundY + (factor * speed);
        _ja('#move-bg').style.backgroundPosition = "0px " + backgroundY + "px";
        _ja('#move-bg').setAttribute('data-py', backgroundY);
    });

    var delay = 0;
    _jaUpdate(function () {
        _jaCollisionDetector('square', ['.death-zone'], ['.layer-bullet'], function (a, b) { b.remove(); });

        _jaCollisionDetector('square', ['.layer-wall'], ['.layer-bullet'], function (a, b) { b.remove(); });
        _jaCollisionDetector('square', ['.layer-wall'], ['#player'], function (a, b) { console.log('damage player') });

        _jaCollisionDetector('square', ['.buff-layer'], ['#player'], function (a, b) { a.remove(); addFireSpot(3); });
        _jaCollisionDetector('square', ['.debuff-layer'], ['#player'], function (a, b) { a.remove(); subFireSpot(1); });


    });



</script>